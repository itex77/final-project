Как сгенерировать Let's Encrypt SSL с помощью Certbot и прокинуть порты в security groups на веб-сервере?

Для генерации SSL-сертификата Let's Encrypt с помощью Certbot и их использования на веб-сервере, вам потребуется выполнить следующие шаги. В этом примере используется операционная система Ubuntu и веб-сервер Nginx, но процесс будет схож для других дистрибутивов и веб-серверов.

1. Установка Certbot:
Откройте терминал и выполните следующие команды:
sudo apt update
sudo apt install software-properties-common
sudo add-apt-repository ppa:certbot/certbot
sudo apt update
sudo apt install certbot


2. Установка плагина Certbot для Nginx:
sudo apt install python3-certbot-nginx


3. Прокинуть порты на веб-сервере:
Для использования SSL вам потребуется открыть порты 80 (HTTP) и 443 (HTTPS) в настройках вашего веб-сервера или облачного провайдера (AWS EC2, Google Cloud, Digital Ocean и пр.):

- Если вы используете виртуальную машину (например, в AWS EC2), перейдите в "Security Groups" и добавьте новые правила для входящего трафика в разделе "Inbound rules". Выберите HTTP и HTTPS из списка предопределенных правил и убедитесь, что источник трафика установлен на "Anywhere" (0.0.0.0/0, ::/0). Сохраните изменения.
- Если вы используете сервер в локальном окружении, вам потребуется настроить ваш межсетевой экран или маршрутизатор для перенаправления входящего трафика на порты 80 и 443.

4. Генерация SSL-сертификата с помощью Certbot:
Выполните следующую команду, заменив "your_domain.com" на ваш домен:
sudo certbot --nginx -d your_domain.com -d www.your_domain.com

Certbot автоматически настроит Nginx и добавит SSL-сертификат к вашему веб-сайту.

5. Проверьте настройки Nginx:
sudo nginx -t


6. Перезагрузите Nginx для применения изменений:
sudo systemctl reload nginx


Теперь ваш веб-сайт должен быть доступен по HTTPS, и браузеры будут использовать SSL-сертификаты Let's Encrypt для установления безопасного соединения. Certbot автоматически обновит сертификат при необходимости, но вы можете вручную выполнить проверку и обновление с помощью команды:
sudo certbot renew --dry-run
