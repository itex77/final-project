Для мониторинга состояния PostgreSQL в Zabbix необходимо выполнить следующие шаги:

1. Настроить мониторинг PostgreSQL на самом сервере баз данных. Для этого нужно включить поддержку мониторинга в конфигурационном файле postgresql.conf, добавив строки:

shared_preload_libraries = 'pg_stat_statements,pg_stat_monitor'
pg_stat_statements.track = all
pg_stat_monitor.max = 1000
pg_stat_monitor.interval = 5s


2. Установить Zabbix agent на сервер баз данных PostgreSQL.

3. Создать новый хост в Zabbix и добавить к нему хост PostgreSQL.

4. Настроить мониторинг в Zabbix, для этого нужно создать новый элемент данных с типом "Zabbix агент (активный)" и указать ключ:

pg.monitoring[*]


5. Задать триггеры для элемента данных с помощью функций Zabbix. Например, можно задать триггер для мониторинга числа открытых соединений:

{<имя хоста>:pg.monitoring[connections_active].last()} > 100


6. Сохранить настройки и запустить мониторинг. В случае возникновения проблем Zabbix будет отправлять уведомления о них администратору.
